<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qu·∫£n l√Ω Hi·ªáu S√°ch</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;
  margin: 0;
}
.navbar {
  overflow: hidden;
  background-color: #333;
}
.navbar a {
  float: left;
  color: white;
  padding: 14px 20px;
  text-decoration: none;
  text-align: center;
}
.navbar a:hover {
  background-color: #04AA6D;
}
.container {
  margin: 20px;
  background: white;
  padding: 20px;
  border-radius: 8px;
}
input, button {
  padding: 8px;
  margin: 5px 0;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
}
th {
  background-color: #04AA6D;
  color: white;
}
button {
  background-color: #04AA6D;
  border: none;
  color: white;
  cursor: pointer;
}
button:hover {
  background-color: #45a049;
}
hr {
  margin: 25px 0;
}
</style>
</head>
<body>

<div class="navbar">
  <a href="#books">üìö S√°ch</a>
  <a href="#inventory">üì¶ T·ªìn kho</a>
  <a href="#orders">üßæ ƒê∆°n h√†ng</a>
  <a href="#report">üìà B√°o c√°o</a>
</div>

<div class="container">
  <h2>Qu·∫£n l√Ω hi·ªáu s√°ch (D√†nh cho ng∆∞·ªùi b√°n)</h2>

  <!-- 1Ô∏è‚É£ QU·∫¢N L√ù DANH S√ÅCH S√ÅCH -->
  <h3 id="books">üìö Qu·∫£n l√Ω danh s√°ch s√°ch</h3>
  <form id="bookForm" onsubmit="saveBook(event)">
    <input type="hidden" id="editIndex">
    <label>T√™n s√°ch:</label><br>
    <input type="text" id="title" required><br>
    <label>T√°c gi·∫£:</label><br>
    <input type="text" id="author" required><br>
    <label>Gi√° (‚Ç´):</label><br>
    <input type="number" id="price" min="0" required><br>
    <label>S·ªë l∆∞·ª£ng:</label><br>
    <input type="number" id="quantity" min="0" required><br>
    <button type="submit">L∆∞u</button>
  </form>

  <table id="bookTable">
    <thead>
      <tr>
        <th>#</th>
        <th>T√™n s√°ch</th>
        <th>T√°c gi·∫£</th>
        <th>Gi√°</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <hr>

  <!-- 2Ô∏è‚É£ QU·∫¢N L√ù T·ªíN KHO -->
  <h3 id="inventory">üì¶ Qu·∫£n l√Ω t·ªìn kho</h3>
  <table id="inventoryTable">
    <thead>
      <tr>
        <th>T√™n s√°ch</th>
        <th>T·ªìn kho</th>
        <th>Tr·∫°ng th√°i</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <hr>

  <!-- 3Ô∏è‚É£ QU·∫¢N L√ù ƒê∆†N H√ÄNG -->
  <h3 id="orders">üßæ Qu·∫£n l√Ω ƒë∆°n h√†ng</h3>
  <label>Ch·ªçn s√°ch:</label><br>
  <select id="orderBook"></select><br>
  <label>S·ªë l∆∞·ª£ng b√°n:</label><br>
  <input type="number" id="orderQty" min="1"><br>
  <button onclick="createOrder()">T·∫°o ƒë∆°n h√†ng</button>

  <table id="orderTable">
    <thead>
      <tr>
        <th>#</th>
        <th>T√™n s√°ch</th>
        <th>S·ªë l∆∞·ª£ng</th>
        <th>Th√†nh ti·ªÅn</th>
        <th>Ng√†y b√°n</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <hr>

  <!-- 4Ô∏è‚É£ B√ÅO C√ÅO DOANH THU -->
  <h3 id="report">üìà B√°o c√°o doanh thu</h3>
  <p>T·ªïng ƒë∆°n h√†ng: <span id="totalOrders">0</span></p>
  <p>T·ªïng doanh thu: <span id="totalRevenue">0</span> ‚Ç´</p>
</div>

<script>
window.onload = () => {
  localStorage.removeItem("books");
  localStorage.removeItem("orders");
};
// ================== QU·∫¢N L√ù S√ÅCH ==================
function saveBook(event) {
  event.preventDefault();
  const title = titleInput.value;
  const author = authorInput.value;
  const price = Number(priceInput.value);
  const quantity = Number(quantityInput.value);
  const index = editIndex.value;

  if (index) {
    books[index] = { title, author, price, quantity };
  } else {
    books.push({ title, author, price, quantity });
  }

  localStorage.setItem("books", JSON.stringify(books));
  document.getElementById("bookForm").reset();
  editIndex.value = "";
  renderBooks();
  renderInventory();
  renderSelectBooks();
}

function renderBooks() {
  const tbody = document.querySelector("#bookTable tbody");
  tbody.innerHTML = "";
  books.forEach((b, i) => {
    const row = `<tr>
      <td>${i + 1}</td>
      <td>${b.title}</td>
      <td>${b.author}</td>
      <td>${b.price.toLocaleString("vi-VN")}</td>
      <td>${b.quantity}</td>
      <td>
        <button onclick="editBook(${i})">S·ª≠a</button>
        <button onclick="deleteBook(${i})">X√≥a</button>
      </td>
    </tr>`;
    tbody.innerHTML += row;
  });
}
function editBook(i) {
  const b = books[i];
  titleInput.value = b.title;
  authorInput.value = b.author;
  priceInput.value = b.price;
  quantityInput.value = b.quantity;
  editIndex.value = i;
}
function deleteBook(i) {
  if (confirm("X√≥a s√°ch n√†y?")) {
    books.splice(i, 1);
    localStorage.setItem("books", JSON.stringify(books));
    renderBooks();
    renderInventory();
    renderSelectBooks();
  }
}

// ================== T·ªíN KHO ==================
function renderInventory() {
  const tbody = document.querySelector("#inventoryTable tbody");
  tbody.innerHTML = "";
  books.forEach(b => {
    const status = b.quantity < 5 ? "‚ö† S·∫Øp h·∫øt h√†ng" : "‚úÖ C√≤n h√†ng";
    const row = `<tr>
      <td>${b.title}</td>
      <td>${b.quantity}</td>
      <td>${status}</td>
    </tr>`;
    tbody.innerHTML += row;
  });
}

// ================== ƒê∆†N H√ÄNG ==================
function renderSelectBooks() {
  const select = document.getElementById("orderBook");
  select.innerHTML = "";
  books.forEach((b, i) => {
    select.innerHTML += `<option value="${i}">${b.title}</option>`;
  });
}

function createOrder() {
  const i = Number(document.getElementById("orderBook").value);
  const qty = Number(document.getElementById("orderQty").value);
  if (qty <= 0 || qty > books[i].quantity) {
    alert("S·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá!");
    return;
  }
  books[i].quantity -= qty;
  const total = qty * books[i].price;
  const date = new Date().toLocaleDateString("vi-VN");
  orders.push({ title: books[i].title, qty, total, date });

  localStorage.setItem("books", JSON.stringify(books));
  localStorage.setItem("orders", JSON.stringify(orders));

  renderBooks();
  renderInventory();
  renderSelectBooks();
  renderOrders();
  renderReport();
}

function renderOrders() {
  const tbody = document.querySelector("#orderTable tbody");
  tbody.innerHTML = "";
  orders.forEach((o, i) => {
    const row = `<tr>
      <td>${i + 1}</td>
      <td>${o.title}</td>
      <td>${o.qty}</td>
      <td>${o.total.toLocaleString("vi-VN")}</td>
      <td>${o.date}</td>
      <td><button onclick="deleteOrder(${i})">X√≥a</button></td>
    </tr>`;
    tbody.innerHTML += row;
  });
}

function deleteOrder(i) {
  if (confirm("X√≥a ƒë∆°n h√†ng n√†y?")) {
    orders.splice(i, 1);
    localStorage.setItem("orders", JSON.stringify(orders));
    renderOrders();
    renderReport();
  }
}
// ================== B√ÅO C√ÅO ==================
function renderReport() {
  document.getElementById("totalOrders").textContent = orders.length;
  const revenue = orders.reduce((sum, o) => sum + o.total, 0);
  document.getElementById("totalRevenue").textContent = revenue.toLocaleString("vi-VN");
}

// ================== KH·ªûI T·∫†O ==================
const titleInput = document.getElementById("title");
const authorInput = document.getElementById("author");
const priceInput = document.getElementById("price");
const quantityInput = document.getElementById("quantity");
const editIndex = document.getElementById("editIndex");

renderBooks();
renderInventory();
renderSelectBooks();
renderOrders();
renderReport();
</script>

</body>
</html>

